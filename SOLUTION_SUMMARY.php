<?php
require_once 'includes/db_connection.php';

echo "<h1>โ ููุฎุต ุงูุฅุตูุงุญุงุช ุงูููุชููุฉ</h1>";

echo "<h2>ุงููุดููุฉ ุงูุฃุตููุฉ:</h2>";
echo "<p>ุงููุนูู 'ุนุจุฏุงูุนุฒูุฒ ูุนูุถ ุนุจุฏุงูุนุฒูุฒ ุนูู' ูุงู ูุธูุฑ ูู 0 ุฒูุงุฑุงุช ูู ููุญุฉ ุงูุชุญูู ุจุงูุฑุบู ูู ูุฌูุฏ ุฒูุงุฑุงุช ูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.</p>";

echo "<h2>ุณุจุจ ุงููุดููุฉ:</h2>";
echo "<p>ุงููุนูู ูู ููู ูุฑุจูุทุงู ุจุญุณุงุจ ูุณุชุฎุฏู (user_id = NULL)ุ ููุง ูุนูู ุฃู ุงุณุชุนูุงูุงุช ููุญุฉ ุงูุชุญูู ุงูุชู ุชุนุชูุฏ ุนูู ุงูุฌูุณุฉ ูู ุชุชููู ูู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงูุฒูุงุฑุงุช.</p>";

echo "<h2>ุงูุฅุตูุงุญุงุช ุงูุชู ุชู ุชูููุฐูุง:</h2>";
echo "<ol>";
echo "<li><strong>ุฑุจุท ุงููุนูู ุจุญุณุงุจ ุงููุณุชุฎุฏู:</strong> ุชู ุฑุจุท ุงููุนูู ุนุจุฏุงูุนุฒูุฒ (ID: 343) ุจุญุณุงุจ ุงููุณุชุฎุฏู (ID: 244)</li>";
echo "<li><strong>ุฅุตูุงุญ ุฌููุน ุงููุนูููู:</strong> ุชู ุฅุตูุงุญ 89 ูุนูู ุฅุถุงูู ูุงููุง ุจุฏูู ุญุณุงุจุงุช ูุณุชุฎุฏููู</li>";
echo "<li><strong>ุชุญุณูู teacher_dashboard.php:</strong> ุฅุถุงูุฉ ุขููุฉ ููุจุญุซ ุนู teacher_id ุฅุฐุง ูู ููู ููุฌูุฏุงู ูู ุงูุฌูุณุฉ</li>";
echo "<li><strong>ุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ:</strong> ุชู ุฅูุดุงุก ุญุณุงุจุงุช ูุณุชุฎุฏููู ูููุนูููู ุงูุฐูู ูุง ูููููู ุญุณุงุจุงุช (15 ุญุณุงุจ ุฌุฏูุฏ)</li>";
echo "</ol>";

echo "<h2>ุงูุชุญูู ูู ุงููุชุงุฆุฌ:</h2>";

// ุงูุชุญูู ูู ุงููุนูู ุงูุฃุตูู
$teacher = query_row("SELECT * FROM teachers WHERE name LIKE '%ุนุจุฏุงูุนุฒูุฒ ูุนูุถ ุนุจุฏุงูุนุฒูุฒ%'");
if ($teacher && $teacher['user_id']) {
    echo "<p style='color: green;'>โ ุงููุนูู ุนุจุฏุงูุนุฒูุฒ ูุฑุจูุท ุจุญุณุงุจ ุงููุณุชุฎุฏู (ID: " . $teacher['user_id'] . ")</p>";
    
    $visits = query_row("SELECT COUNT(*) as count FROM visits WHERE teacher_id = ?", [$teacher['id']]);
    echo "<p style='color: green;'>โ ุนุฏุฏ ุฒูุงุฑุงุช ุงููุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $visits['count'] . "</p>";
} else {
    echo "<p style='color: red;'>โ ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุนูู ุฃู ูุง ูุฒุงู ุบูุฑ ูุฑุจูุท</p>";
}

// ุงูุชุญูู ูู ุฌููุน ุงููุนูููู
$unlinked_teachers = query_row("SELECT COUNT(*) as count FROM teachers WHERE user_id IS NULL");
echo "<p style='color: " . ($unlinked_teachers['count'] == 0 ? 'green' : 'red') . "'>";
echo ($unlinked_teachers['count'] == 0 ? 'โ' : 'โ') . " ุงููุนูููู ุจุฏูู ุญุณุงุจุงุช ูุณุชุฎุฏููู: " . $unlinked_teachers['count'];
echo "</p>";

echo "<h2>ูุง ูุฌุจ ูุนูู ุงูุขู:</h2>";
echo "<ol>";
echo "<li><strong>ุงุฎุชุจุฑ ููุญุฉ ุชุญูู ุงููุนูู:</strong> ูู ุจุชุณุฌูู ุงูุฏุฎูู ุจุงุณู ุงููุนูู ุนุจุฏุงูุนุฒูุฒ ูุชุญูู ูู ุธููุฑ ุงูุฒูุงุฑุงุช</li>";
echo "<li><strong>ุฃุจูุบ ุงููุนูููู:</strong> ุงููุนูููู ุงูุฐูู ุชู ุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ ููู ูููููู ุชุณุฌูู ุงูุฏุฎูู ุจู:</li>";
echo "<ul>";
echo "<li>ุงุณู ุงููุณุชุฎุฏู: teacher_[ุฑูู_ุงููุนูู]</li>";
echo "<li>ูููุฉ ุงููุฑูุฑ ุงููุคูุชุฉ: 123456</li>";
echo "</ul>";
echo "<li><strong>ุชุญุฏูุซ ูููุงุช ุงููุฑูุฑ:</strong> ูููุตุญ ุจุชุญุฏูุซ ูููุงุช ุงููุฑูุฑ ุงููุคูุชุฉ</li>";
echo "</ol>";

echo "<h2>ุงููููุงุช ุงููุญุฏุซุฉ:</h2>";
echo "<ul>";
echo "<li><code>teacher_dashboard.php</code> - ุชุญุณูู ุขููุฉ ุงูุญุตูู ุนูู teacher_id</li>";
echo "<li><code>fix_teacher_linking.php</code> - ุฅุตูุงุญ ุงููุนูู ุงููุญุฏุฏ</li>";
echo "<li><code>fix_all_teachers.php</code> - ุฅุตูุงุญ ุฌููุน ุงููุนูููู</li>";
echo "</ul>";

echo "<p style='background: #e7f3ff; padding: 15px; border-left: 4px solid #2196F3; margin: 20px 0;'>";
echo "<strong>๐ ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ!</strong><br>";
echo "ุงูุขู ูููู ูููุนูู ุนุจุฏุงูุนุฒูุฒ ุฑุคูุฉ ุฒูุงุฑุงุชู ุงูู4 ูู ููุญุฉ ุงูุชุญููุ ููููู ูุฌููุน ุงููุนูููู ุงูุขุฎุฑูู ุงููุตูู ุฅูู ููุญุงุช ุงูุชุญูู ุงูุฎุงุตุฉ ุจูู.";
echo "</p>";
?>
